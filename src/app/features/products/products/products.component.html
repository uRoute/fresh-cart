<section class="my-3">
    <div class="products">
        <input [(ngModel)]="searchKey" class="form-control w-50 d-block mx-auto my-3" placeholder="Search for product ..." type="text" id="searchInput">
        <div class="row">
            @for(product of products | search : searchKey | paginate: { itemsPerPage: 12 , currentPage: p } ; track product._id){

            <div class="col-md-6 col-lg-4 col-xl-3 col-xxl-2 p-2">
                <div class="product position-relative overflow-hidden border border-2 border-secondary-subtle p-2 rounded-3">
                    <div [routerLink]="['/p-details' , product._id , product.slug]">
                        <div class="product-img">
                            <img [src]="product.imageCover" class="w-100 d-block" alt="">
                        </div>
                        <div class="product-caption">
                            <h1 class="fs-6 fw-bold text-success my-1"> {{product.title.split(' ',2).join(' ')}} </h1>
                            <div class="d-flex justify-content-between align-items-center">
                                <h2 class="fs-6 fw-bold text-success my-1"> {{product.price | currency : 'GBP'}} </h2>
                                <span>
                                    {{product.ratingsAverage}}
                                    <i class="text-warning fa-solid fa-star "></i>
                                </span>
                            </div>
                            <h3 class="fs-5 fw-bold text-success my-1"> {{product.category.name}} </h3>
                        </div>
                    </div>
                    <div class="addCartBtn">
                        <button (click)="AddToCart(product._id)" class="btn btn-success d-block"> <i
                                class="fa-solid fa-cart-shopping "></i> </button>
                    </div>
                </div>
            </div>




            }@empty {
            <h1 class="text-center main-title d-flex align-items-center justify-content-center">No items to show
                <span><i class="fa-solid fa-person-through-window fa-2xl mx-md-3" style="color: #4fb395;"></i></span>
            </h1>
            }

            @if (products && products.length>0) {<pagination-controls class="d-flex justify-content-center align-items-center"
                (pageChange)="p = $event"></pagination-controls>}


        </div>
    </div>
</section>